<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escenario 1 - Carrito de Compras</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="scenarios.css">
    
    <!-- TRACKING ESPECÃFICO ESCENARIO 1: Carrito de Compras -->
    <script src="tracking-escenario1.js"></script>
    
</head>
<body>
    <!-- Modal del Carrito de Compras -->
    <div id="cartModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeCart()">&times;</span>
            <h2>ğŸ›’ Carrito de Compras</h2>
            
            <div class="cart-items">
                <div class="cart-item">
                    <img src="https://via.placeholder.com/60x60/667eea/ffffff?text=ğŸ•" alt="Producto">
                    <div class="cart-item-info">
                        <span class="item-name">Alimento Premium Perro 15kg</span>
                        <span class="item-price">$89.990</span>
                    </div>
                    <span class="item-qty">x1</span>
                </div>
                <div class="cart-item">
                    <img src="https://via.placeholder.com/60x60/764ba2/ffffff?text=ğŸ±" alt="Producto">
                    <div class="cart-item-info">
                        <span class="item-name">Alimento Gato Adulto 10kg</span>
                        <span class="item-price">$65.990</span>
                    </div>
                    <span class="item-qty">x2</span>
                </div>
            </div>
            
            <div class="cart-total">
                <strong>Total: $221.970</strong>
            </div>
            
            <button class="btn btn-primary" onclick="proceedToCheckout()">
                Proceder al Pago
            </button>
        </div>
    </div>

    <!-- Modal de Ayuda (aparece despuÃ©s de 30s) -->
    <div id="helpModal" class="modal help-modal">
        <div class="modal-content help-content">
            <span class="close-btn" onclick="closeHelpModal()">&times;</span>
            <div class="help-icon">ğŸ’¬</div>
            <h2>Â¿Necesitas ayuda?</h2>
            <p>Notamos que llevas un tiempo revisando tu carrito. Â¿Te podemos ayudar con algo?</p>
            <div class="help-buttons">
                <button class="btn btn-help-primary" onclick="connectToAgent()">
                    ğŸ’¬ Hablar con un asesor
                </button>
                <button class="btn btn-help-secondary" onclick="closeHelpModal()">
                    Continuar solo
                </button>
            </div>
        </div>
    </div>

    <!-- Contenido Principal -->
    <div class="container">
        <header class="scenario-header">
            <div class="brand">
                <span class="brand-logo">ğŸ¾</span>
                <span class="brand-name">Gabrica Conecta</span>
            </div>
            <h1>Escenario 1: Carrito de Compras</h1>
            <p class="subtitle">DetecciÃ³n de fricciÃ³n en el carrito</p>
        </header>

        <main>
            <!-- NavegaciÃ³n -->
            <section class="buttons-section">
                <div class="button-group">
                    <a href="index.html" class="btn btn-back">
                        ğŸ  Inicio
                    </a>
                    <a href="escenarios.html" class="btn btn-secondary">
                        ğŸ“‹ Ver Escenarios
                    </a>
                </div>
            </section>

            <!-- BotÃ³n del Carrito -->
            <section class="cart-section">
                <h2>Haz clic en el carrito para ver tus productos</h2>
                <div class="cart-icon-container" onclick="openCart()">
                    <span class="cart-icon">ğŸ›’</span>
                    <span class="cart-badge">2</span>
                </div>
                <p class="cart-hint">Al abrir el carrito se generarÃ¡ el evento <code>cart_opened</code></p>
            </section>

            <!-- Indicadores de Eventos -->
            <section class="tracking-section">
                <h2>ğŸ“Š Indicadores de Eventos</h2>
                
                <div class="indicators-grid">
                    <div class="indicator" id="cartOpenedIndicator">
                        <div class="indicator-header">
                            <span class="indicator-icon">ğŸ›’</span>
                            <span class="indicator-name">cart_opened</span>
                        </div>
                        <div class="indicator-status">
                            <span id="cartOpenedStatus">â³ Esperando...</span>
                        </div>
                        <p class="indicator-desc">Se dispara cuando el usuario abre el carrito</p>
                    </div>
                    
                    <div class="indicator" id="cartIdleIndicator">
                        <div class="indicator-header">
                            <span class="indicator-icon">â±ï¸</span>
                            <span class="indicator-name">cart_idle_30s</span>
                        </div>
                        <div class="indicator-status">
                            <span id="cartIdleStatus">â³ Esperando...</span>
                            <span id="cartTimer" class="timer-display">0s</span>
                        </div>
                        <p class="indicator-desc">Se dispara si el usuario pasa 30s con el carrito abierto</p>
                    </div>
                </div>
            </section>

            <!-- InformaciÃ³n del Escenario -->
            <section class="info-section">
                <h2>â„¹ï¸ CÃ³mo funciona este escenario</h2>
                <div class="info-cards">
                    <div class="info-card">
                        <h3>ğŸ¯ Objetivo</h3>
                        <p>Detectar cuando un cliente estÃ¡ teniendo dificultades o dudas al revisar su carrito de compras.</p>
                    </div>
                    <div class="info-card">
                        <h3>ğŸ“¡ Eventos Generados</h3>
                        <ul>
                            <li><code>cart_opened</code> - Al abrir el carrito</li>
                            <li><code>cart_idle_30s</code> - 30 segundos en el carrito</li>
                        </ul>
                    </div>
                    <div class="info-card">
                        <h3>ğŸ’¡ AcciÃ³n Predictiva</h3>
                        <p>DespuÃ©s de 30 segundos en el carrito, aparece una oferta de ayuda proactiva al cliente.</p>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p>&copy; 2025 Gabrica Conecta - Laboratorio Predictive Engage</p>
        </footer>
    </div>

    <script src="scenario-checkout.js"></script>
</body>
</html>
