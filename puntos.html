<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Puntos Gabrica - Mi Perfil</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="scenarios.css">
    
    <!-- GENESYS CLOUD PREDICTIVE ENGAGEMENT TRACKING -->
    <script src="tracking.js"></script>
    
</head>
<body>
    <!-- Modal de Ayuda Puntos -->
    <div id="puntosHelpModal" class="modal help-modal">
        <div class="modal-content help-content">
            <span class="close-btn" onclick="closePuntosHelpModal()">&times;</span>
            <div class="help-icon">ğŸ</div>
            <h2>Padre de Mascota, Â¡Comienza a ganar puntos por tus compras!</h2>
            <p>Notamos que aÃºn no has cargado facturas. Â¿Necesitas ayuda para empezar a acumular puntos?</p>
            <div class="help-buttons">
                <button class="btn btn-help-primary" onclick="connectToPuntosAgent()">
                    ğŸ’¬ SÃ­, necesito ayuda
                </button>
                <button class="btn btn-help-secondary" onclick="closePuntosHelpModal()">
                    Lo harÃ© despuÃ©s
                </button>
            </div>
        </div>
    </div>

    <!-- Contenido Principal -->
    <div class="container">
        <header class="scenario-header">
            <div class="brand">
                <span class="brand-logo">ğŸ¾</span>
                <span class="brand-name">Gabrica Conecta</span>
            </div>
            <h1>Mi Perfil - Puntos Gabrica</h1>
            <p class="subtitle">Escenario 3: Usuario no activo en Puntos</p>
        </header>

        <main>
            <!-- NavegaciÃ³n -->
            <section class="buttons-section">
                <div class="button-group">
                    <a href="index.html" class="btn btn-back">
                        ğŸ  Inicio
                    </a>
                    <a href="escenarios.html" class="btn btn-secondary">
                        ğŸ“‹ Ver Escenarios
                    </a>
                </div>
            </section>

            <!-- Perfil de Usuario -->
            <section class="profile-section">
                <div class="profile-header">
                    <div class="profile-avatar">
                        <span>ğŸ‘¤</span>
                    </div>
                    <div class="profile-info">
                        <h2>Juan PÃ©rez</h2>
                        <p>Padre de Mascota desde 2024</p>
                        <span class="profile-email">juan.perez@email.com</span>
                    </div>
                </div>
            </section>

            <!-- MenÃº de Perfil -->
            <section class="profile-menu">
                <div class="menu-grid">
                    <div class="menu-item" onclick="navigateToSection('datos')">
                        <span class="menu-icon">ğŸ“</span>
                        <span class="menu-label">Mis Datos</span>
                    </div>
                    <div class="menu-item" onclick="navigateToSection('pedidos')">
                        <span class="menu-icon">ğŸ“¦</span>
                        <span class="menu-label">Mis Pedidos</span>
                    </div>
                    <div class="menu-item" onclick="navigateToSection('mascotas')">
                        <span class="menu-icon">ğŸ¾</span>
                        <span class="menu-label">Mis Mascotas</span>
                    </div>
                    <div class="menu-item puntos-item" id="puntosMenuItem" onclick="navigateToPuntos()">
                        <span class="menu-icon">ğŸ</span>
                        <span class="menu-label">Puntos Gabrica</span>
                        <span class="menu-badge">Â¡Nuevo!</span>
                    </div>
                    <div class="menu-item" onclick="navigateToSection('direcciones')">
                        <span class="menu-icon">ğŸ“</span>
                        <span class="menu-label">Direcciones</span>
                    </div>
                    <div class="menu-item" onclick="navigateToSection('favoritos')">
                        <span class="menu-icon">â¤ï¸</span>
                        <span class="menu-label">Favoritos</span>
                    </div>
                </div>
            </section>

            <!-- Indicadores de Tracking -->
            <section class="tracking-indicators">
                <h3>ğŸ“Š Indicadores de Tracking (Demo)</h3>
                <div class="indicator-grid">
                    <div class="indicator" id="loginIndicator">
                        <span class="indicator-label">SesiÃ³n iniciada</span>
                        <span class="indicator-value">âœ…</span>
                        <span class="indicator-trigger">-</span>
                    </div>
                    <div class="indicator" id="puntosAccessIndicator">
                        <span class="indicator-label">AccediÃ³ a Puntos</span>
                        <span class="indicator-value" id="puntosAccess">No</span>
                        <span class="indicator-trigger">Trigger: No accede</span>
                    </div>
                    <div class="indicator" id="facturasIndicator">
                        <span class="indicator-label">Facturas cargadas</span>
                        <span class="indicator-value" id="facturasCount">0</span>
                        <span class="indicator-trigger">Trigger: 0</span>
                    </div>
                    <div class="indicator" id="timeInProfileIndicator">
                        <span class="indicator-label">Tiempo en perfil</span>
                        <span class="indicator-value" id="profileTime">0s</span>
                        <span class="indicator-trigger">Trigger: 30s</span>
                    </div>
                </div>
            </section>

            <!-- SecciÃ³n de Puntos (inicialmente oculta) -->
            <section class="puntos-section" id="puntosSection" style="display: none;">
                <div class="puntos-header">
                    <h2>ğŸ Puntos Gabrica</h2>
                    <div class="puntos-balance">
                        <span class="balance-label">Tu saldo actual</span>
                        <span class="balance-value">0 puntos</span>
                    </div>
                </div>

                <div class="puntos-actions">
                    <div class="puntos-action-card" onclick="showUploadFactura()">
                        <span class="action-icon">ğŸ“„</span>
                        <h3>Cargar Factura</h3>
                        <p>Sube tus facturas y acumula puntos</p>
                    </div>
                    <div class="puntos-action-card">
                        <span class="action-icon">ğŸ</span>
                        <h3>Canjear Puntos</h3>
                        <p>Descubre las recompensas disponibles</p>
                    </div>
                    <div class="puntos-action-card">
                        <span class="action-icon">ğŸ“Š</span>
                        <h3>Historial</h3>
                        <p>Revisa tus movimientos de puntos</p>
                    </div>
                </div>

                <div class="puntos-empty-state" id="emptyState">
                    <span class="empty-icon">ğŸ“­</span>
                    <h3>AÃºn no tienes puntos</h3>
                    <p>Carga tu primera factura y comienza a ganar puntos por tus compras de productos Gabrica.</p>
                    <button class="btn btn-primary" onclick="showUploadFactura()">
                        ğŸ“„ Cargar mi primera factura
                    </button>
                </div>
            </section>

            <!-- Modal de Carga de Factura -->
            <div id="uploadModal" class="modal">
                <div class="modal-content">
                    <span class="close-btn" onclick="closeUploadModal()">&times;</span>
                    <h2>ğŸ“„ Cargar Factura</h2>
                    <div class="upload-form">
                        <div class="form-group">
                            <label>NÃºmero de factura</label>
                            <input type="text" placeholder="Ej: FAC-12345" class="input-field">
                        </div>
                        <div class="form-group">
                            <label>Fecha de compra</label>
                            <input type="date" class="input-field">
                        </div>
                        <div class="form-group">
                            <label>Foto de la factura</label>
                            <div class="upload-area">
                                <span>ğŸ“·</span>
                                <p>Arrastra tu archivo aquÃ­ o haz clic para seleccionar</p>
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="submitFactura()">
                            Enviar Factura
                        </button>
                    </div>
                </div>
            </div>

            <!-- InformaciÃ³n del Escenario -->
            <section class="scenario-info">
                <h2>â„¹ï¸ InformaciÃ³n del Escenario</h2>
                <div class="scenario-details">
                    <div class="detail-card">
                        <h4>ğŸ¯ Objetivo</h4>
                        <p>Activar usuarios en el programa Puntos Gabrica.</p>
                    </div>
                    <div class="detail-card">
                        <h4>âš¡ Se activa cuando</h4>
                        <ul>
                            <li>Usuario inicia sesiÃ³n y no accede a Puntos</li>
                            <li>Usuario no ha cargado facturas en Puntos</li>
                            <li>Tiempo en perfil > 30 segundos sin interacciÃ³n</li>
                        </ul>
                    </div>
                    <div class="detail-card">
                        <h4>ğŸ¤– Acciones del sistema</h4>
                        <ul>
                            <li>Mensaje: "Padre de Mascota, Comienza a ganar puntos"</li>
                            <li>ActivaciÃ³n de flujo Puntos Gabrica</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Control de SesiÃ³n -->
            <section class="tracking-section">
                <h2>Control de SesiÃ³n</h2>
                <div class="button-group">
                    <button class="btn btn-destroy" onclick="destroySession()">
                        ğŸ›‘ Terminar SesiÃ³n de Tracking
                    </button>
                </div>
            </section>
        </main>

        <footer>
            <p>&copy; 2025 Laboratorio Predictive Engage - Genesys Cloud | Gabrica</p>
        </footer>
    </div>

    <script src="script.js"></script>
    <script src="scenario-puntos.js"></script>
</body>
</html>
